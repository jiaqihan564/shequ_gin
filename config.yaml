# 社区后端配置文件
# 配置文件优先级：环境变量 > 配置文件 > 默认值

# 服务器配置
server:
  host: "localhost"
  port: "3001"
  mode: "release"  # debug, release, test

# 数据库配置
database:
  host: "127.0.0.1"
  port: "3306"
  username: "root"
  password: "root"
  database: "hub"
  charset: "utf8mb4"
  max_open_conns: 100
  max_idle_conns: 10
  conn_max_lifetime: "1h"

# JWT配置
jwt:
  secret_key: "your_secret_key_change_this_in_production"
  expire_hours: 24
  issuer: "community-api"

# 日志配置
log:
  level: "debug"  # debug, info, warn, error
  format: "json"  # json, text
  output: "file"  # stdout, file
  file_path: "log/app.log"
  max_size: 100  # MB
  max_backups: 3
  max_age: 28  # days
  async: true
  buffer: 1024
  drop_policy: "block"  # block | drop_new | drop_oldest

# 安全配置
security:
  max_login_attempts: 5

# CORS配置
cors:
  allow_origins: ["*"]
  allow_methods: ["GET", "POST", "PUT", "DELETE", "OPTIONS"]
  allow_headers: ["Origin", "Content-Type", "Content-Length", "Accept-Encoding", "X-CSRF-Token", "Authorization"]
  allow_credentials: true

# 静态资源/对象存储配置（用于头像等）
assets:
  # 指向桶根目录的可访问 URL（不要带尾部斜杠）
  # 例如针对 MinIO： http://192.168.200.131:9000/community-assets
  public_base_url: "http://192.168.200.131:9000/community-assets"
  max_avatar_size_mb: 5
  # 历史头像最大保留数量（含归档，不含当前 avatar.png）
  max_avatar_history: 9

# MinIO 对象存储配置
minio:
  endpoint: "127.0.0.1:9000"
  access_key_id: "minioadmin"
  secret_access_key: "minioadmin"
  use_ssl: false
  bucket: "community-assets"